## Customize the test machine
machine:
   # Set the timezone
  timezone:
    America/Edmonton

  # Version of Node to use
  node:
    version:
      6.5.0

## Customize dependencies
dependencies:
  pre:
  #"npm cache clean && npm run rimraf -- node_modules doc coverage dist"
    - npm run clean
  #"Install global dependencies of framework"
    - npm install --global webpack
    - npm install --global webpack-dev-server
    - npm install --global karma-cli
    - npm install --global protractor
    - npm install --global typescript
  #"Start Installation"
    - npm install
  #The following command are necessary to have a successful startup on Linux (it might be temporary and should be fixed in future version of framework)
    - npm uninstall webpack --save-dev
    - npm install webpack@2.1.0-beta.21 --save-dev
    - npm uninstall "@types/selenium-webdriver" --save-dev
    - npm install "@types/selenium-webdriver@2.44.26" --save-dev

  override:
    - npm run build:prod


## Customize test commands
test:
  override:
    - npm run test

deployment:
  staging:
    branch: master
    codedeploy:
      my-app:
        application_root: /
        revision_location:
          revision_type: S3
          s3_location:
            bucket: ws-my-bucket
            key_pattern: apps/my-app-{SHORT_COMMIT}-{BUILD_NUM}
        region: us-west-2
        deployment_group: ws-deployment-group
        deployment_config: CodeDeployDefault.AllAtOnce